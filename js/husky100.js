function falseScroll(){$(window).scrollTop($(window).scrollTop()+1)}function debounce(e,t){var a;return function(){a&&clearTimeout(a),a=setTimeout(function(){e(),a=null},t||100)}}function getFilterValue(e){var t="",a=!1;return $(".labelToggle.filtered > select").each(function(){".arts-sci-arts, .arts-sci-humanities, .arts-sci-natural-sci, .arts-sci-social-sci, .arts-sci-all-divisions"==$(this).val()?a=!0:t+=$(this).val()}),""!==t?e.addClass("select_active"):$(".filtered > select").prop("selectedIndex",0),filterValueReturn=a?".arts-sci-arts"+t+", .arts-sci-humanities"+t+", .arts-sci-natural-sci"+t+", .arts-sci-social-sci"+t+", .arts-sci-all-divisions"+t:t}function imageSwitch(e){var t=e.find(".flipper .front"),e=e.data("img");t.toggleClass("lazy"),t.css("background-image","url("+e+")")}jQuery(function(i){var s=new LazyLoad({elements_selector:".lazy"});var a,t,e,n=i("#searcher_wrap"),l=i("#searcher"),o=i(window).height(),r=i(window).width(),c=i("#filter"),d=i(".grid").isotope({itemSelector:".grid-item",percentPosition:!0,filter:getFilterValue(c),masonry:{columnWidth:".grid-sizer"}}),u=(d.one("arrangeComplete",function(){i("#overlay").fadeOut(300,function(){i(this).remove()})}),d.isotope(),falseScroll(),i(".quicksearch").keyup(debounce(function(){a=new RegExp(u.val(),"gi");var t=getFilterValue(c)?getFilterValue(c):"*";d.isotope({filter:function(){var e=i(this);return(!a||e.text().match(a))&&e.is(":not(.title-card)")&&e.is(t)}})},200)));function p(e){var t=(o-e.height())/2;$mobile=r<768?50:t,d.one("arrangeComplete",function(){i("html, body").animate({scrollTop:e.offset().top-$mobile},900)})}function h(e){var t=e.find(".full-bio"),e=e.find(".flipper"),a=!1===t.attr("aria-hidden",!1),i=!0!==e.attr("aria-expanded",!0);t.attr("aria-hidden",a),e.attr("aria-expanded",i)}i(".featured").each(function(e,t){imageSwitch(i(t)),s.update()}),d.on("click",".grid-item",function(){var e=i(this),t=e.data("name"),t=t&&"#name="+t;e.hasClass("open")||e.hasClass("special")?(e.removeClass("open"),h(e)):(i(".grid-item").removeClass("open"),e.addClass("open"),imageSwitch(e),p(e),window.location.hash=t,h(e),e.on("keyup",function(e){"Escape"===e.key&&(i(".grid-item").removeClass("open"),history.replaceState(null,document.title,location.pathname+location.search),i(".grid").isotope("layout"))})),d.isotope()}),i("#clear").on("click",function(e){e.preventDefault(),i(".filtered > select").prop("selectedIndex",0),i(".grid-item").removeClass("open"),c.removeClass("select_active"),c.find(".filtered").removeClass("labelToggle"),window.location.hash="",d.isotope({filter:":not(.title-card)"})}),i("select#year-awarded").change(function(e){location=i(this).find(":selected").data("url")}),c.on("change","select",function(){""===this.value?i(this).parent("li").removeClass("labelToggle"):i(this).parent("li").addClass("labelToggle");var t=new RegExp(i(".quicksearch").val(),"gi"),a=getFilterValue(c)?getFilterValue(c):"*";d.isotope({filter:function(){var e=i(this);return(!t||e.text().match(t))&&e.is(":not(.title-card)")&&e.is(a)}}),falseScroll(),s.update()}),c.each(function(e,t){var a=i(t);a.on("click","button",function(){a.find(".is-checked").removeClass("is-checked"),i(this).addClass("is-checked")})}),i("#searcher").on("click",function(e){e.preventDefault(),n.find("input").focus(),n.toggleClass("active_search"),l.hasClass("is-checked")&&(n.find("input").val(""),i(".quicksearch").keyup()),l.toggleClass("is-checked")}),i(document).on("keyup",function(e){27==e.keyCode&&i("#searcher").hasClass("is-checked")&&(n.toggleClass("active_search"),l.toggleClass("is-checked"),n.find("input").val(""))}),i(document).keypress(function(e){13==e.which&&i(e.target).trigger("click")}),i(document).on("click","a.tag",function(e){var t=i(this);$text=t.text(),e.preventDefault(),e.stopPropagation(),c.addClass("select_active"),d.isotope({filter:function(){return!$text||i(this).find(".tags").text().match($text)}}),falseScroll(),s.update()}),location.hash.match(/^#name/)&&(e="?json=husky100.get_recipient&name="+(t=location.hash.substring(6)),i("#"+t).remove(),i.getJSON(e,function(e){0<e.count&&(e=(e=e).posts[0],$personCard=i(_.template('<li tabindex="0" id="<%= slug %>" data-name="<%= slug %>" data-img="<%= img_highres %>" class="flip-container grid-item <%= classes %>"><div class="flipper" role="button" aria-expanded="false"><div class="front lazy" data-src="<%= img %>"></div><div class="back"><p class="back-title"><%= post_title %></p><p class="major"><%= major %></p></div><div tabindex="0" class="full-bio" aria-hidden="true"><h2><%= post_title %><% if (  linkedin )  { %><a target="_blank" class="linkedin" href="<%= linkedin %>">LinkedIn</a><% } %></h2><div class="bio-info"><p><%= hometown %></p><p><%= major %></p><p><%= minor %></p><p class="year-awarded">Year awarded <%= year_awarded %></p></div><div class="bio-text"><p><%= content %></p></div><div class="tags"><% _.each(tags, function(tag) { %><a href="#" class="tag"><%= tag %></a><% }); %></div></div></div></li>')({slug:e.slug,img_highres:e.img_highres,img:e.img,classes:e.classes.join(" "),major:e.major,minor:e.minor,hometown:e.hometown,linkedin:e.linkedin,content:e.content,tags:e.tags,year_awarded:e.year_awarded,post_title:e.post_title})),d.prepend($personCard).isotope("prepended",$personCard),(e=i("#"+t)).addClass("open"),d.isotope({filter:""}),p(e),imageSwitch(e),s.update(),h(e))}).fail(function(e,t,a){console.log("Request Failed: "+(t+", "+a))}))}),"onpropertychange"in document&&window.matchMedia&&$("html").addClass("ie10");