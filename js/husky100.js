"use strict";function falseScroll(){$(window).scrollTop($(window).scrollTop()+1)}function debounce(e,t){var a;return function(){a&&clearTimeout(a),a=setTimeout(function(){e(),a=null},t||100)}}function getFilterValue(e){var t="",a=!1;return $(".labelToggle.filtered > select").each(function(){".arts-sci-arts, .arts-sci-humanities, .arts-sci-natural-sci, .arts-sci-social-sci, .arts-sci-all-divisions"==$(this).val()?a=!0:t+=$(this).val()}),""!==t?e.addClass("select_active"):$(".filtered > select").prop("selectedIndex",0),filterValueReturn=a?".arts-sci-arts"+t+", .arts-sci-humanities"+t+", .arts-sci-natural-sci"+t+", .arts-sci-social-sci"+t+", .arts-sci-all-divisions"+t:t,filterValueReturn}function imageSwitch(e){var t=e,a=t.find(".flipper .front"),i=t.data("img");a.toggleClass("lazy"),a.css("background-image","url("+i+")")}$(window).on("load",function(){var e=new LazyLoad({elements_selector:".lazy"});var t,a=$("#searcher_wrap"),i=$("#searcher"),s=$(window).height(),n=$(window).width(),l=$("#filter"),o=$(".grid").isotope({itemSelector:".grid-item",percentPosition:!0,filter:getFilterValue(l),masonry:{columnWidth:".grid-sizer"}});o.one("arrangeComplete",function(){$("#overlay").fadeOut(300,function(){$(this).remove()})}),o.isotope(),falseScroll();var r=$(".quicksearch").keyup(debounce(function(){t=new RegExp(r.val(),"gi");var e=getFilterValue(l)?getFilterValue(l):"*";o.isotope({filter:function(){var a=$(this);return(!t||a.text().match(t))&&a.is(":not(.title-card)")&&a.is(e)}})},200));function c(e){var t=(s-e.height())/2;$mobile=n<768?50:t,o.one("arrangeComplete",function(){$("html, body").animate({scrollTop:e.offset().top-$mobile},900)})}function d(e){var t=e.find(".full-bio"),a=e.find(".flipper"),i=!1===t.attr("aria-hidden",!1),s=!0!==a.attr("aria-expanded",!0);t.attr("aria-hidden",i),a.attr("aria-expanded",s)}if($(".featured").each(function(t,a){imageSwitch($(a)),e.update()}),o.on("click",".grid-item",function(){var e=$(this),t=e.data("name"),a=t&&"#name="+t;e.hasClass("open")||e.hasClass("special")?(e.removeClass("open"),d(e)):($(".grid-item").removeClass("open"),e.addClass("open"),imageSwitch(e),c(e),window.location.hash=a,d(e)),o.isotope()}),$("#clear").on("click",function(e){e.preventDefault(),$(".filtered > select").prop("selectedIndex",0),$(".grid-item").removeClass("open"),l.removeClass("select_active"),l.find(".filtered").removeClass("labelToggle"),window.location.hash="",o.isotope({filter:":not(.title-card)"})}),$("select#year-awarded").change(function(e){location=$(this).find(":selected").data("url")}),l.on("change","select",function(){""===this.value?$(this).parent("li").removeClass("labelToggle"):$(this).parent("li").addClass("labelToggle");var t=new RegExp($(".quicksearch").val(),"gi"),a=getFilterValue(l)?getFilterValue(l):"*";o.isotope({filter:function(){var e=$(this);return(!t||e.text().match(t))&&e.is(":not(.title-card)")&&e.is(a)}}),falseScroll(),e.update()}),l.each(function(e,t){var a=$(t);a.on("click","button",function(){a.find(".is-checked").removeClass("is-checked"),$(this).addClass("is-checked")})}),$("#searcher").on("click",function(e){e.preventDefault(),a.find("input").focus(),a.toggleClass("active_search"),i.hasClass("is-checked")&&(a.find("input").val(""),$(".quicksearch").keyup()),i.toggleClass("is-checked")}),$(document).on("keyup",function(e){27==e.keyCode&&$("#searcher").hasClass("is-checked")&&(a.toggleClass("active_search"),i.toggleClass("is-checked"),a.find("input").val(""))}),$(document).keypress(function(e){13==e.which&&$(e.target).trigger("click")}),$(document).on("click","a.tag",function(t){var a=$(this),i=t;$text=a.text(),i.preventDefault(),i.stopPropagation(),l.addClass("select_active"),o.isotope({filter:function(){return!$text||$(this).find(".tags").text().match($text)}}),falseScroll(),e.update()}),location.hash.match(/^#name/)){var u=location.hash.substring(6),p="?json=husky100.get_recipient&name="+u;$("#"+u).remove();$.getJSON(p,function(t){if(t.count>0){!function(e){var t=e.posts[0];$personCard=$(_.template('<li tabindex="0" id="<%= slug %>" data-name="<%= slug %>" data-img="<%= img_highres %>" class="flip-container grid-item <%= classes %>"><div class="flipper" role="button" aria-expanded="false"><div class="front lazy" data-src="<%= img %>"></div><div class="back"><p class="back-title"><%= post_title %></p><p class="major"><%= major %></p></div><div tabindex="0" class="full-bio" aria-hidden="true"><h2><%= post_title %><% if (  linkedin )  { %><a target="_blank" class="linkedin" href="<%= linkedin %>">LinkedIn</a><% } %></h2><div class="bio-info"><p><%= hometown %></p><p><%= major %></p><p><%= minor %></p><p class="year-awarded">Year awarded <%= year_awarded %></p></div><div class="bio-text"><p><%= content %></p></div><div class="tags"><% _.each(tags, function(tag) { %><a href="#" class="tag"><%= tag %></a><% }); %></div></div></div></li>')({slug:t.slug,img_highres:t.img_highres,img:t.img,classes:t.classes.join(" "),major:t.major,minor:t.minor,hometown:t.hometown,linkedin:t.linkedin,content:t.content,tags:t.tags,year_awarded:t.year_awarded,post_title:t.post_title})),o.prepend($personCard).isotope("prepended",$personCard)}(t);var a=$("#"+u);a.addClass("open"),o.isotope({filter:""}),c(a),imageSwitch(a),e.update(),d(a)}}).fail(function(e,t,a){var i=t+", "+a;console.log("Request Failed: "+i)})}}),"onpropertychange"in document&&window.matchMedia&&$("html").addClass("ie10");