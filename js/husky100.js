function falseScroll(){$(window).scrollTop($(window).scrollTop()+1)}function debounce(e,t){var a;return function(){a&&clearTimeout(a),a=setTimeout(function(){e(),a=null},t||100)}}function getFilterValue(e){var t="",a=!1;return $(".labelToggle.filtered > select").each(function(){".arts-sci-arts, .arts-sci-humanities, .arts-sci-natural-sci, .arts-sci-social-sci, .arts-sci-all-divisions"==$(this).val()?a=!0:t+=$(this).val()}),""!==t?e.addClass("select_active"):$(".filtered > select").prop("selectedIndex",0),filterValueReturn=a?".arts-sci-arts"+t+", .arts-sci-humanities"+t+", .arts-sci-natural-sci"+t+", .arts-sci-social-sci"+t+", .arts-sci-all-divisions"+t:t}function imageSwitch(e){var t=e.find(".flipper .front"),e=e.data("img");t.toggleClass("lazy"),t.css("background-image","url("+e+")")}$(window).on("load",function(){var i=new LazyLoad({elements_selector:".lazy"});var a,t,e,s=$("#searcher_wrap"),n=$("#searcher"),o=$(window).height(),l=$(window).width(),r=$("#filter"),c=$(".grid").isotope({itemSelector:".grid-item",percentPosition:!0,filter:getFilterValue(r),masonry:{columnWidth:".grid-sizer"}}),d=(c.one("arrangeComplete",function(){$("#overlay").fadeOut(300,function(){$(this).remove()})}),c.isotope(),falseScroll(),$(".quicksearch").keyup(debounce(function(){a=new RegExp(d.val(),"gi");var t=getFilterValue(r)?getFilterValue(r):"*";c.isotope({filter:function(){var e=$(this);return(!a||e.text().match(a))&&e.is(":not(.title-card)")&&e.is(t)}})},200)));function u(e){var t=(o-e.height())/2;$mobile=l<768?50:t,c.one("arrangeComplete",function(){$("html, body").animate({scrollTop:e.offset().top-$mobile},900)})}function p(e){var t=e.find(".full-bio"),e=e.find(".flipper"),a=!1===t.attr("aria-hidden",!1),i=!0!==e.attr("aria-expanded",!0);t.attr("aria-hidden",a),e.attr("aria-expanded",i)}$(".featured").each(function(e,t){imageSwitch($(t)),i.update()}),c.on("click",".grid-item",function(){var e=$(this),t=e.data("name"),t=t&&"#name="+t;e.hasClass("open")||e.hasClass("special")?(e.removeClass("open"),p(e)):($(".grid-item").removeClass("open"),e.addClass("open"),imageSwitch(e),u(e),window.location.hash=t,p(e),e.on("keyup",function(e){"Escape"===e.key&&($(".grid-item").removeClass("open"),history.replaceState(null,document.title,location.pathname+location.search),$(".grid").isotope("layout"))})),c.isotope()}),$("#clear").on("click",function(e){e.preventDefault(),$(".filtered > select").prop("selectedIndex",0),$(".grid-item").removeClass("open"),r.removeClass("select_active"),r.find(".filtered").removeClass("labelToggle"),window.location.hash="",c.isotope({filter:":not(.title-card)"})}),$("select#year-awarded").change(function(e){location=$(this).find(":selected").data("url")}),r.on("change","select",function(){""===this.value?$(this).parent("li").removeClass("labelToggle"):$(this).parent("li").addClass("labelToggle");var t=new RegExp($(".quicksearch").val(),"gi"),a=getFilterValue(r)?getFilterValue(r):"*";c.isotope({filter:function(){var e=$(this);return(!t||e.text().match(t))&&e.is(":not(.title-card)")&&e.is(a)}}),falseScroll(),i.update()}),r.each(function(e,t){var a=$(t);a.on("click","button",function(){a.find(".is-checked").removeClass("is-checked"),$(this).addClass("is-checked")})}),$("#searcher").on("click",function(e){e.preventDefault(),s.find("input").focus(),s.toggleClass("active_search"),n.hasClass("is-checked")&&(s.find("input").val(""),$(".quicksearch").keyup()),n.toggleClass("is-checked")}),$(document).on("keyup",function(e){27==e.keyCode&&$("#searcher").hasClass("is-checked")&&(s.toggleClass("active_search"),n.toggleClass("is-checked"),s.find("input").val(""))}),$(document).keypress(function(e){13==e.which&&$(e.target).trigger("click")}),$(document).on("click","a.tag",function(e){var t=$(this);$text=t.text(),e.preventDefault(),e.stopPropagation(),r.addClass("select_active"),c.isotope({filter:function(){return!$text||$(this).find(".tags").text().match($text)}}),falseScroll(),i.update()}),location.hash.match(/^#name/)&&(e="?json=husky100.get_recipient&name="+(t=location.hash.substring(6)),$("#"+t).remove(),$.getJSON(e,function(e){0<e.count&&(e=(e=e).posts[0],$personCard=$(_.template('<li tabindex="0" id="<%= slug %>" data-name="<%= slug %>" data-img="<%= img_highres %>" class="flip-container grid-item <%= classes %>"><div class="flipper" role="button" aria-expanded="false"><div class="front lazy" data-src="<%= img %>"></div><div class="back"><p class="back-title"><%= post_title %></p><p class="major"><%= major %></p></div><div tabindex="0" class="full-bio" aria-hidden="true"><h2><%= post_title %><% if (  linkedin )  { %><a target="_blank" class="linkedin" href="<%= linkedin %>">LinkedIn</a><% } %></h2><div class="bio-info"><p><%= hometown %></p><p><%= major %></p><p><%= minor %></p><p class="year-awarded">Year awarded <%= year_awarded %></p></div><div class="bio-text"><p><%= content %></p></div><div class="tags"><% _.each(tags, function(tag) { %><a href="#" class="tag"><%= tag %></a><% }); %></div></div></div></li>')({slug:e.slug,img_highres:e.img_highres,img:e.img,classes:e.classes.join(" "),major:e.major,minor:e.minor,hometown:e.hometown,linkedin:e.linkedin,content:e.content,tags:e.tags,year_awarded:e.year_awarded,post_title:e.post_title})),c.prepend($personCard).isotope("prepended",$personCard),(e=$("#"+t)).addClass("open"),c.isotope({filter:""}),u(e),imageSwitch(e),i.update(),p(e))}).fail(function(e,t,a){console.log("Request Failed: "+(t+", "+a))}))}),"onpropertychange"in document&&window.matchMedia&&$("html").addClass("ie10");